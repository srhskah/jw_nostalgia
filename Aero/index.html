<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JW Aero</title>
    <link rel="stylesheet" href="style.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DotGothic16&display=swap" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.7.1.min.js"></script>
    <script>window.jQuery || document.write('<script src="/path/to/local/jquery.min.js"><\/script>')</script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <style>
        body{
            margin: 0 auto;
            /* font-family: Frutiger-Normal, "HarmonyOS Sans SC"; */
            font-family: Segoe UI, 'HarmonyOS Sans SC';
            background: rgba(205,205,205,0.5);
        }
    </style>
</head>
<body>
    <div class="satu">
        <div id="jw_aero">
            <div id="title">
                <p id="title_text" style="float: left;margin-block-start: 0;z-index: 1;">ğŸ–¼ï¸ Image Viewer</p>
                <div class="btn" style="z-index: 2;">
                    <!-- <div></div>
                    <div></div> -->
                    <!-- <div style="background: red;">Ã—</div>&nbsp;
                    <div style="background: rgb(0, 192, 0);">+</div>&nbsp;
                    <div style="background: rgb(0, 128, 255);line-height: 0.8em;">-</div> -->
                    <div style="background: linear-gradient(0deg, rgba(255,0,0,1) 0%, rgba(255,70,50,1) 49%, rgba(255,140,100,1) 49%, rgba(255,210,150,1) 100%);">Ã—</div>&nbsp;
                    <div style="background: linear-gradient(0deg, rgba(0,176,0,1) 0%, rgba(50,202,70,1) 49%, rgba(100,228,140,1) 49%, rgba(150,255,210,1) 100%);">+</div>&nbsp;
                    <div style="background: linear-gradient(0deg, rgba(0,128,255,1) 0%, rgba(50,156,255,1) 49%, rgba(100,184,255,1) 49%, rgba(150,212,255,1) 100%);line-height: 0.8em;">-</div>
                </div>
            </div>
            <div id="imgs">
                <!-- <img id="img-avatar" style="max-width: 100%;max-height: 30em;"> -->
                <img id="img-avatar" style="max-width: 100%;">
            </div>
            <div id="box" style="text-align: center;">
                <!-- Sarahah! -->
                <input id="chooseImage" type="file" name="file" accept="image/*">
                <button class="file-input-trigger" style="font-family: Segoe UI, 'HarmonyOS Sans SC';">é€‰æ‹©å›¾ç‰‡</button>
                <!-- <input type="button" value=""> -->
            </div>
    
            <script>
                $("#chooseImage").on('change', function(){
                    let file = this.files[0];
                    if (file) {
                        let reader = new FileReader();
                        reader.onload = function(e) {
                            $('#img-avatar').attr('src', e.target.result);
                        };
                        reader.readAsDataURL(file);
                    }
                });
                $('.file-input-trigger').on('click', function() {
                    $('#chooseImage').trigger('click');
                });
            </script>
        </div>
    </div>
    
    <div class="dua">
        <br>
        çª—å£æ ‡é¢˜&NonBreakingSpace;&NonBreakingSpace;&NonBreakingSpace;&NonBreakingSpace;
        <input type="text" id="textInput" oninput="updateP(this.value)">
        <br>
        <span style="font-size:0.625em">âš ï¸ è¾“å…¥æ–‡æœ¬åï¼Œçª—å£æ ‡é¢˜å°†è‡ªåŠ¨æ›´æ”¹ä¸ºæ–‡æœ¬æ¡†å†…å®¹</span>
        <!-- <p id="displayText">åˆå§‹å†…å®¹</p> -->
        <br><br>
        <div id="ctrls">
            å›¾ç‰‡é€æ˜åº¦
            &NonBreakingSpace;&NonBreakingSpace;&NonBreakingSpace;&NonBreakingSpace;
            <!-- å›¾ç‰‡é€æ˜åº¦é€æ˜åº¦&nbsp;&nbsp;&nbsp;&nbsp;&NonBreakingSpace;&NonBreakingSpace;&NonBreakingSpace;&NonBreakingSpace; -->
            <label>
                <input type="range" id="slider" min="0" max="1" step="0.01" value="1">
            </label>
            <label>
                <input type="number" id="input_num" min="0" max="1" step="0.01" value="1">
            </label>
        </div>
        <br>
        <div id="ctrls_2">
            é¢œè‰²<!-- é€æ˜åº¦&nbsp;&nbsp;&nbsp;&nbsp; -->
            <!-- &NonBreakingSpace;&NonBreakingSpace;&NonBreakingSpace;&NonBreakingSpace; -->
            <br>
            R
            <label>
                <input type="range" id="slider_r" min="0" max="255" step="1" value="171">
            </label>
            <label>
                <input type="number" id="input_r" min="0" max="255" step="1" value="171">
            </label>
            <br>
            <!-- &NonBreakingSpace;&NonBreakingSpace;&NonBreakingSpace;&NonBreakingSpace; -->
            G
            <label>
                <input type="range" id="slider_g" min="0" max="255" step="1" value="205">
            </label>
            <label>
                <input type="number" id="input_g" min="0" max="255" step="1" value="205">
            </label>
            <br>
            <!-- &NonBreakingSpace;&NonBreakingSpace;&NonBreakingSpace;&NonBreakingSpace; -->
            B
            <label>
                <input type="range" id="slider_b" min="0" max="255" step="1" value="249">
            </label>
            <label>
                <input type="number" id="input_b" min="0" max="255" step="1" value="249">
            </label>
            <br>
            <!-- &NonBreakingSpace;&NonBreakingSpace;&NonBreakingSpace;&NonBreakingSpace; -->
            A<!-- é€æ˜åº¦&nbsp;&nbsp;&nbsp;&nbsp; -->
            <label>
                <input type="range" id="slider_a" min="0" max="1" step="0.01" value="0.5">
            </label>
            <label>
                <input type="number" id="input_a" min="0" max="1" step="0.01" value="0.5">
            </label>
        </div>
        <br>
        <script>
            // è·å–å…ƒç´ 
            const target = document.getElementById('img-avatar');
            const slider = document.getElementById('slider');
            const input = document.getElementById('input_num');

            // æ»‘åŠ¨æ¡æ”¹å˜æ—¶æ›´æ–°é€æ˜åº¦å’Œè¾“å…¥æ¡†çš„å€¼
            slider.addEventListener('input', () => {
                const opacity = slider.value;
                target.style.opacity = opacity;
                input.value = opacity;
            });

            // è¾“å…¥æ¡†æ”¹å˜æ—¶æ›´æ–°é€æ˜åº¦å’Œæ»‘åŠ¨æ¡çš„å€¼
            input.addEventListener('input', () => {
                const opacity = input.value;
                target.style.opacity = opacity;
                slider.value = opacity;
            });
        </script>
        <script>
            const trg = document.getElementById('jw_aero');
            const redSlider = document.getElementById('slider_r');
            const greenSlider = document.getElementById('slider_g');
            const blueSlider = document.getElementById('slider_b');
            const alphaSlider = document.getElementById('slider_a');
            const redValue = document.getElementById('input_r');
            const greenValue = document.getElementById('input_g');
            const blueValue = document.getElementById('input_b');
            const alphaValue = document.getElementById('input_a');

            // æ›´æ–°èƒŒæ™¯é¢œè‰²
            function updateBackgroundColor() {
                const red = redSlider.value;
                const green = greenSlider.value;
                const blue = blueSlider.value;
                const alpha = alphaSlider.value;

                // è®¾ç½®ç›®æ ‡æ§ä»¶çš„èƒŒæ™¯é¢œè‰²
                trg.style.backgroundColor = `rgba(${red}, ${green}, ${blue}, ${alpha})`;

                // æ›´æ–°æ˜¾ç¤ºçš„å€¼
                redValue.value = red;
                greenValue.value = green;
                blueValue.value = blue;
                alphaValue.value = alpha;
            }

            // æ›´æ–°èƒŒæ™¯é¢œè‰²
            function updateBackgroundColor_2() {
                const red = redValue.value;
                const green = greenValue.value;
                const blue = blueValue.value;
                const alpha = alphaValue.value;

                // è®¾ç½®ç›®æ ‡æ§ä»¶çš„èƒŒæ™¯é¢œè‰²
                trg.style.backgroundColor = `rgba(${red}, ${green}, ${blue}, ${alpha})`;

                // æ›´æ–°æ˜¾ç¤ºçš„å€¼
                redSlider.value = red;
                greenSlider.value = green;
                blueSlider.value = blue;
                alphaSlider.value = alpha;
            }


            // ç›‘å¬æ»‘åŠ¨æ¡çš„å˜åŒ–
            redSlider.addEventListener('input', updateBackgroundColor);
            greenSlider.addEventListener('input', updateBackgroundColor);
            blueSlider.addEventListener('input', updateBackgroundColor);
            alphaSlider.addEventListener('input', updateBackgroundColor);


            redValue.addEventListener('input', updateBackgroundColor_2);
            greenValue.addEventListener('input', updateBackgroundColor_2);
            blueValue.addEventListener('input', updateBackgroundColor_2);
            alphaValue.addEventListener('input', updateBackgroundColor_2);

            // åˆå§‹åŒ–
            updateBackgroundColor();
            updateBackgroundColor_2();
        </script>
        <script>
            function updateP(newValue) {
                document.getElementById('title_text').textContent = newValue;
            }
        </script>
        <button id="exportButton">å¯¼å‡ºå¯¹è¯æ¡†ä¸ºå›¾ç‰‡</button>
        <script>
            document.getElementById('exportButton').addEventListener('click', function() {
                var element = document.getElementById('jw_aero'); // è·å–ä½ æƒ³è¦å¯¼å‡ºçš„ <div> çš„ ID
                html2canvas(element, {
                    useCORS: true, // å…è®¸è·¨åŸŸè¯·æ±‚ï¼Œå¦‚æœdivä¸­æœ‰æ¥è‡ªä¸åŒåŸŸåçš„èµ„æº
                    backgroundColor: null, // è®¾ç½®èƒŒæ™¯é¢œè‰²ä¸ºnullä»¥ä¿æŒé€æ˜åº¦
                    scale: 2, // å¯é€‰ï¼šæé«˜è¾“å‡ºå›¾åƒçš„è´¨é‡
                    dpi: window.devicePixelRatio // æ ¹æ®è®¾å¤‡åƒç´ æ¯”è°ƒæ•´åˆ†è¾¨ç‡
                }).then(function(canvas) {
                    // å°† canvas è½¬æ¢ä¸ºå›¾ç‰‡ï¼Œå¹¶åˆ›å»ºä¸€ä¸ªä¸‹è½½é“¾æ¥
                    var imgData = canvas.toDataURL('image/png');
                    var link = document.createElement('a');
                    link.href = imgData;
                    link.download = 'exported-image.png'; // è®¾ç½®æ–‡ä»¶å
                    link.click();
                });
            });
        </script>
        <br><br>
        <a href="../Classic/index.html">JW Classic (Win9x-like)</a>
    </div>
    
</body>
</html>